const hostName=document.getElementById("cookie_host_name"),whiteListHandlerButton=document.getElementById("cookie_handler"),iframe=document.getElementById("cookie_settings_iframe");let currentTab=!1;function reloadMenu(e){translate(),chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.runtime.sendMessage({command:"get_active_tab",tabId:e[0].id},(function(e){currentTab=!!(e=e||{}).tab&&e.tab,e.tab&&e.tab.hostname?(e.tab.whitelisted?whiteListHandlerButton.textContent=chrome.i18n.getMessage("removeFromWhitelist"):whiteListHandlerButton.textContent=chrome.i18n.getMessage("addToWhitelist"),e.tab.whitelisted?$("#cookie_handler").css("background","#489FF8"):$("#cookie_handler").css("color","#66BE99"),hostName.textContent=e.tab.hostname):(hostName.textContent=e.tab.url.split("/?")[0],whiteListHandlerButton.textContent=chrome.i18n.getMessage("notWorkingOnThisPage"),$("#cookie_handler").css("background","#95A9B7"),iframe.style.display="none",$(".cookie_popup_wrapper").css("height","100px"))}))}))}function translate(){for(const e of document.querySelectorAll("[data-translate]"))e.textContent=chrome.i18n.getMessage(e.dataset.translate)}whiteListHandlerButton.addEventListener("click",(function(e){chrome.runtime.sendMessage({command:"toggle_extension",tabId:currentTab.id},(()=>{window.location.reload(),chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.reload(e[0].id)})),reloadMenu(!0)}))})),chrome.runtime.onMessage.addListener(((e,t,n)=>{"collapse_popup_on"===e.command&&(document.getElementsByClassName("cookie_popup_wrapper")[0].style.height="250px",reloadMenu()),"collapse_popup_off"===e.command&&(document.getElementsByClassName("cookie_popup_wrapper")[0].style.height="540px",reloadMenu())})),reloadMenu();